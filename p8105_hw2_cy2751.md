p8105_hw2_cy2751
================
Congyu Yang
2024-09-29

## Problem 1

``` r
NYCTransit_df <- read_csv(
  "datasets_hw2/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",na = "",
  col_types = cols(Route8 = "c", Route9 = "c", Route10 = "c", Route11 = "c")) %>% 
  janitor::clean_names() %>% 
  select(line,station_name,station_latitude,station_longitude,(route1:route11),
         entry,exit_only,vending,entrance_type,ada) %>% 
  mutate(entry = ifelse(entry == "YES",T,F))
```

This dataset contains information of all train stations in NYC.
Including variables train line, station name, the specific location of
the station( latitude and longitude),all routes inside each station,
entry and exit information, vending information, entrance type and
whether ada compliance or not. I clean the data by importing data,
identify `NA` values, specify the variable type of all routes. I also
update variables names and select only the useful variables for the
later question. Lastly, update variable `entry` to be a logical
variable. Current dataset has dimension 1,868 × 20.  
We cannot say these data are tidy, because when we need to focus on
specific routes, routes should be a variable rather than a column
name.  

``` r
NYCTransit_df %>%  
  select(station_name, line) %>%  
  distinct() 
```

    ## # A tibble: 465 × 2
    ##    station_name             line    
    ##    <chr>                    <chr>   
    ##  1 25th St                  4 Avenue
    ##  2 36th St                  4 Avenue
    ##  3 45th St                  4 Avenue
    ##  4 53rd St                  4 Avenue
    ##  5 59th St                  4 Avenue
    ##  6 77th St                  4 Avenue
    ##  7 86th St                  4 Avenue
    ##  8 95th St                  4 Avenue
    ##  9 9th St                   4 Avenue
    ## 10 Atlantic Av-Barclays Ctr 4 Avenue
    ## # ℹ 455 more rows

There are 465 distinct stations.

``` r
NYCTransit_df %>% 
  select(station_name,line,ada) %>% 
  distinct() %>% 
  filter(ada == T) 
```

    ## # A tibble: 84 × 3
    ##    station_name                   line            ada  
    ##    <chr>                          <chr>           <lgl>
    ##  1 Atlantic Av-Barclays Ctr       4 Avenue        TRUE 
    ##  2 DeKalb Av                      4 Avenue        TRUE 
    ##  3 Pacific St                     4 Avenue        TRUE 
    ##  4 Grand Central                  42nd St Shuttle TRUE 
    ##  5 34th St                        6 Avenue        TRUE 
    ##  6 47-50th Sts Rockefeller Center 6 Avenue        TRUE 
    ##  7 Church Av                      6 Avenue        TRUE 
    ##  8 21st St                        63rd Street     TRUE 
    ##  9 Lexington Av                   63rd Street     TRUE 
    ## 10 Roosevelt Island               63rd Street     TRUE 
    ## # ℹ 74 more rows

In all, 84 stations are ADA compliant.

``` r
NYCTransit_df %>%
  filter(vending == "NO") %>% 
  pull(entry) %>% 
  mean()
```

    ## [1] 0.3770492

Around 37.7% of station entrances/exit with vending allow entrance.

``` r
NYCTransit_df %>% 
  pivot_longer(
    cols = route1:route11,
    names_to = "route_number",
    values_to = "route_name",
    names_prefix = "route"
  ) %>% 
  filter(route_name == "A") %>% 
  select(line,station_name) %>% 
    distinct()
```

    ## # A tibble: 60 × 2
    ##    line            station_name                 
    ##    <chr>           <chr>                        
    ##  1 42nd St Shuttle Times Square                 
    ##  2 8 Avenue        125th St                     
    ##  3 8 Avenue        145th St                     
    ##  4 8 Avenue        14th St                      
    ##  5 8 Avenue        168th St - Washington Heights
    ##  6 8 Avenue        175th St                     
    ##  7 8 Avenue        181st St                     
    ##  8 8 Avenue        190th St                     
    ##  9 8 Avenue        34th St                      
    ## 10 8 Avenue        42nd St                      
    ## # ℹ 50 more rows

``` r
NYCTransit_df %>% 
  pivot_longer(
    cols = route1:route11,
    names_to = "route_number",
    values_to = "route_name",
    names_prefix = "route"
  ) %>% 
  filter(route_name == "A") %>% 
  select(line,station_name,ada) %>% 
  distinct() %>% 
    filter(ada == T)
```

    ## # A tibble: 17 × 3
    ##    line             station_name                  ada  
    ##    <chr>            <chr>                         <lgl>
    ##  1 8 Avenue         14th St                       TRUE 
    ##  2 8 Avenue         168th St - Washington Heights TRUE 
    ##  3 8 Avenue         175th St                      TRUE 
    ##  4 8 Avenue         34th St                       TRUE 
    ##  5 8 Avenue         42nd St                       TRUE 
    ##  6 8 Avenue         59th St                       TRUE 
    ##  7 8 Avenue         Inwood - 207th St             TRUE 
    ##  8 8 Avenue         West 4th St                   TRUE 
    ##  9 8 Avenue         World Trade Center            TRUE 
    ## 10 Broadway         Times Square-42nd St          TRUE 
    ## 11 Broadway-7th Ave 59th St-Columbus Circle       TRUE 
    ## 12 Broadway-7th Ave Times Square                  TRUE 
    ## 13 Canarsie         8th Av                        TRUE 
    ## 14 Franklin         Franklin Av                   TRUE 
    ## 15 Fulton           Euclid Av                     TRUE 
    ## 16 Fulton           Franklin Av                   TRUE 
    ## 17 Rockaway         Howard Beach                  TRUE

60 distinct stations serve A train. Among these stations, 17 of them are
ADA compliant.

## Problem 2

``` r
Mr_Trash_df <- read_excel("datasets_hw2/202309 Trash Wheel Collection Data.xlsx",
                          sheet = "Mr. Trash Wheel",range = "A2:N587") %>% 
  janitor::clean_names() %>% 
  mutate(sports_balls=as.integer(round(sports_balls)))
```
